[build]
target = "aarch64-unknown-none"

[target.aarch64-unknown-none]
rustflags = [
    # Removed custom linker script for PIE - let linker generate relocations
    # "-C", "link-arg=-Tlinker.ld",
    "-C", "relocation-model=pic",
    "-C", "link-arg=-pie",
    "-C", "link-arg=-q",  # Emit relocations
    "-C", "link-arg=--emit-relocs",  # Keep all relocations
]

# UEFI target configuration
[target.aarch64-unknown-uefi]
rustflags = [
    "-C", "target-feature=+strict-align",
]